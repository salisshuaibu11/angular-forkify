<app-spinner *ngIf="isLoading"></app-spinner>

<div class="recipe" [ngClass]="{'toggleVisibility': isLoading}">
  <figure class="recipe__fig">
      <img *ngIf="!isOnline" src="/assets/img/test-1.jpg" class="recipe__img"/>
      <img *ngIf="isOnline" [src]="recipe.image_url" alt="Tomato" class="recipe__img">
      <h1 class="recipe__title">
          <span>{{recipe.title}}</span>
      </h1>
  </figure>
  <div class="recipe__details">
      <div class="recipe__info">
          <svg class="recipe__info-icon">
              <use href="/assets/img/icons.svg#icon-stopwatch"></use>
          </svg>
          <span class="recipe__info-data recipe__info-data--minutes">{{recipe.time}}</span>
          <span class="recipe__info-text"> minutes</span>
      </div>
      <div class="recipe__info">
          <svg class="recipe__info-icon">
              <use href="/assets/img/icons.svg#icon-man"></use>
          </svg>
          <span class="recipe__info-data recipe__info-data--people">{{recipe.servings}}</span>
          <span class="recipe__info-text"> servings</span>

          <div class="recipe__info-buttons">
              <button (click)="updateServing('dec')" class="btn-tiny">
                  <svg>
                      <use href="/assets/img/icons.svg#icon-circle-with-minus"></use>
                  </svg>
              </button>
              <button (click)="updateServing('inc')" class="btn-tiny">
                  <svg>
                      <use href="/assets/img/icons.svg#icon-circle-with-plus"></use>
                  </svg>
              </button>
          </div>

      </div>
      <button (click)="addLike(recipe)" class="recipe__love">
          <svg class="header__likes">
              <use href="/assets/img/icons.svg#icon-heart-outlined"></use>
          </svg>
      </button>
  </div>

  <div class="recipe__ingredients">
      <ul class="recipe__ingredient-list">
          <li *ngFor="let ingredient of recipe.ingredients" class="recipe__item">
              <svg class="recipe__icon">
                  <use href="/assets/img/icons.svg#icon-check"></use>
              </svg>
              <div class="recipe__count">{{ingredient.count}}</div>
              <div class="recipe__ingredient">
                  <span class="recipe__unit">{{ingredient.unit}}</span>
                  {{ingredient.ingredient}}
              </div>
          </li>
      </ul>

      <button (click)="addToShoppingList()" class="btn-small recipe__btn">
          <svg class="search__icon">
              <use href="/assets/img/icons.svg#icon-shopping-cart"></use>
          </svg>
          <span>Add to shopping list</span>
      </button>
  </div>

  <div class="recipe__directions">
      <h2 class="heading-2">How to cook it</h2>
      <p class="recipe__directions-text">
          This recipe was carefully designed and tested by
          <span class="recipe__by">The Pioneer Woman</span>. Please check out directions at their website.
      </p>
      <a class="btn-small recipe__btn" href="http://thepioneerwoman.com/cooking/pasta-with-tomato-cream-sauce/" target="_blank">
          <span>Directions</span>
          <svg class="search__icon">
              <use href="/assets/img/icons.svg#icon-triangle-right"></use>
          </svg>

      </a>
  </div>

</div>
